version: '3'
services:
  centos1:
    networks:
      - network
    hostname: centos1
    container_name: centos1
    ports:
      - "9822:22"
      - "8098:8098"
    deploy:
      resources:
        limits:
          cpus: "1"
          memory: "3g"
    memswap_limit: "2g"
    build:
      context: .
      dockerfile: ./centos1/Dockerfile
    stdin_open: true
    tty: true
    volumes:
      - ./centos1/common:/common
      - ./disk1:/sys/fs/cgroup
  centos2:
    networks:
      - network
    hostname: centos2
    container_name: centos2
    ports:
      - "9922:22"
      - "8099:8098"
    deploy:
      resources:
        limits:
          cpus: "1"
          memory: "3g"
    memswap_limit: "2g"
    build:
      context: .
      dockerfile: ./centos2/Dockerfile
    stdin_open: true
    tty: true
    volumes:
      - ./centos2/common:/common
      - ./disk2:/sys/fs/cgroup
  centos3:
      networks:
        - network
      hostname: centos3
      container_name: centos3
      ports:
        - "10022:22"
        - "8100:8098"
      deploy:
        resources:
          limits:
            cpus: "1"
            memory: "3g"
      memswap_limit: "2g"
      build:
        context: .
        dockerfile: ./centos3/Dockerfile
      stdin_open: true
      tty: true
      volumes:
        - ./centos3/common:/common
        - ./disk3:/sys/fs/cgroup

  networks:
    network:
      driver: bridge